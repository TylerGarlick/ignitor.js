"use strict";
Object.defineProperties(exports, {
  Ignitor: {get: function() {
      return Ignitor;
    }},
  __esModule: {value: true}
});
var $__database__,
    $__utilities__;
var Database = ($__database__ = require("./database"), $__database__ && $__database__.__esModule && $__database__ || {default: $__database__}).Database;
var StringUtilities = ($__utilities__ = require("./utilities"), $__utilities__ && $__utilities__.__esModule && $__utilities__ || {default: $__utilities__}).StringUtilities;
var Ignitor = {
  models: {},
  settings: {pluralize: true},
  connect: function(url) {
    this.db = Database.connect(url);
  },
  model: function(name, schema) {
    var options = arguments[2] !== (void 0) ? arguments[2] : {
      methods: {},
      statics: {}
    };
    var key = StringUtilities.formatKey(name);
    this.collection = this.settings.pluralize ? StringUtilities.pluralize(name) : name;
    if (options.collection)
      this.collection = options.collection;
    return this.models[key] = Model.initialize(this.collection, schema, options);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlnbml0b3IuanMiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvNSIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8zIiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzAiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvMSIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci80IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxLQUFLLGlCQUFpQixBQUFDLENBQUMsT0FBTTtTQ0E5QixFQUFDLEdBQUUsWUNBcUI7QUFBRSxvQkFBd0I7SUFBRSxBREE5QixDQUFDO0FFQXZCLFdBQVMsQ0NBVCxFQUFDLEtBQUksQ0RBTyxLQUFHLEFDQVMsQ0FBQztDSkF5QixDQUFDOzs7RURBM0MsU0FBTyxFTUFmLEVBQUMsZUFBb0IsQ0FBQSxPQUFNLEFBQUMsY0FBa0IsQ0FDdEMsQ0FBQSxnQkFBcUIseUJBQTJCLENBQUEsZ0JBQXFCLEdBQUssRUFBQyxPQUFNLGVBQW1CLENBRDlELEFBQytELENBQUM7RU5BdEcsZ0JBQWMsRU1EdEIsRUFBQyxnQkFBb0IsQ0FBQSxPQUFNLEFBQUMsZUFBa0IsQ0FDdEMsQ0FBQSxpQkFBcUIsMEJBQTJCLENBQUEsaUJBQXFCLEdBQUssRUFBQyxPQUFNLGdCQUFtQixDQUQ5RCxBQUMrRCxDQUFDO0FORXZHLEFBQUksRUFBQSxDQUFBLE9BQU0sRUFBSTtBQUVuQixPQUFLLENBQUcsR0FBQztBQUVULFNBQU8sQ0FBRyxFQUNSLFNBQVEsQ0FBRyxLQUFHLENBQ2hCO0FBRUEsUUFBTSxDQUFOLFVBQVEsR0FBRSxDQUFHO0FBQ1gsT0FBRyxHQUFHLEVBQUksQ0FBQSxRQUFPLFFBQVEsQUFBQyxDQUFDLEdBQUUsQ0FBQyxDQUFDO0VBQ2pDO0FBRUEsTUFBSSxDQUFKLFVBQU0sSUFBRyxDQUFHLENBQUEsTUFBSyxBQUF1QyxDQUFHO01BQXZDLFFBQU0sNkNBQUk7QUFBRSxZQUFNLENBQUcsR0FBQztBQUFHLFlBQU0sQ0FBRyxHQUFDO0FBQUEsSUFBQztBQUV0RCxBQUFJLE1BQUEsQ0FBQSxHQUFFLEVBQUksQ0FBQSxlQUFjLFVBQVUsQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0FBQ3pDLE9BQUcsV0FBVyxFQUFJLENBQUEsSUFBRyxTQUFTLFVBQVUsRUFBSSxDQUFBLGVBQWMsVUFBVSxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUEsQ0FBSSxLQUFHLENBQUM7QUFFbEYsT0FBSSxPQUFNLFdBQVc7QUFDbkIsU0FBRyxXQUFXLEVBQUksQ0FBQSxPQUFNLFdBQVcsQ0FBQztBQUFBLEFBRXRDLFNBQU8sQ0FBQSxJQUFHLE9BQU8sQ0FBRSxHQUFFLENBQUMsRUFBSSxDQUFBLEtBQUksV0FBVyxBQUFDLENBQUMsSUFBRyxXQUFXLENBQUcsT0FBSyxDQUFHLFFBQU0sQ0FBQyxDQUFDO0VBQzlFO0FBQUEsQUFFRixDQUFDO0FBQUEiLCJmaWxlIjoiaWduaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGF0YWJhc2V9IGZyb20gJy4vZGF0YWJhc2UnO1xuaW1wb3J0IHtTdHJpbmdVdGlsaXRpZXN9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IHZhciBJZ25pdG9yID0ge1xuXG4gIG1vZGVsczoge30sXG5cbiAgc2V0dGluZ3M6IHtcbiAgICBwbHVyYWxpemU6IHRydWVcbiAgfSxcblxuICBjb25uZWN0KHVybCkge1xuICAgIHRoaXMuZGIgPSBEYXRhYmFzZS5jb25uZWN0KHVybCk7XG4gIH0sXG5cbiAgbW9kZWwobmFtZSwgc2NoZW1hLCBvcHRpb25zID0geyBtZXRob2RzOiB7fSwgc3RhdGljczoge319KSB7XG5cbiAgICB2YXIga2V5ID0gU3RyaW5nVXRpbGl0aWVzLmZvcm1hdEtleShuYW1lKTtcbiAgICB0aGlzLmNvbGxlY3Rpb24gPSB0aGlzLnNldHRpbmdzLnBsdXJhbGl6ZSA/IFN0cmluZ1V0aWxpdGllcy5wbHVyYWxpemUobmFtZSkgOiBuYW1lO1xuXG4gICAgaWYgKG9wdGlvbnMuY29sbGVjdGlvbilcbiAgICAgIHRoaXMuY29sbGVjdGlvbiA9IG9wdGlvbnMuY29sbGVjdGlvbjtcblxuICAgIHJldHVybiB0aGlzLm1vZGVsc1trZXldID0gTW9kZWwuaW5pdGlhbGl6ZSh0aGlzLmNvbGxlY3Rpb24sIHNjaGVtYSwgb3B0aW9ucyk7XG4gIH1cblxufTsiLCJPYmplY3QuZGVmaW5lUHJvcGVydGllcyhleHBvcnRzLCAkX19wbGFjZWhvbGRlcl9fMCk7Iiwie2dldDogJF9fcGxhY2Vob2xkZXJfXzB9IiwiZ2V0ICRfX3BsYWNlaG9sZGVyX18wKCkgeyByZXR1cm4gJF9fcGxhY2Vob2xkZXJfXzE7IH0iLCJfX2VzTW9kdWxlOiB0cnVlIiwie3ZhbHVlOiAkX19wbGFjZWhvbGRlcl9fMH0iLCIoJF9fcGxhY2Vob2xkZXJfXzAgPSByZXF1aXJlKCRfX3BsYWNlaG9sZGVyX18xKSwgXG4gICAgICAgICRfX3BsYWNlaG9sZGVyX18yICYmICRfX3BsYWNlaG9sZGVyX18zLl9fZXNNb2R1bGUgJiYgJF9fcGxhY2Vob2xkZXJfXzQgfHwge2RlZmF1bHQ6ICRfX3BsYWNlaG9sZGVyX181fSkiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=